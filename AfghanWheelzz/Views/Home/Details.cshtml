@{
    ViewData["Title"] = "Detail";
}

<div class="container">
    <h1 class="text-center mb-4">Car Details</h1>

    <div class="row align-items-center">
        <!-- Car details -->
        <div class="col-md-6">
            <div class="card car-details p-4">
                <h4 class="text-primary">@Model.Make @Model.Model</h4>
                <hr />
                <dl class="row">
                    <dt class="col-sm-4"><i class="fas fa-map-marker-alt mr-2"></i>Location</dt> <!-- Location icon -->
                    <dd class="col-sm-8">@ViewBag.Location.City</dd>

                    <dt class="col-sm-4"><i class="far fa-calendar-alt mr-2"></i>Published Date</dt> <!-- Published date icon -->
                    <dd class="col-sm-8">@Model.DatePublished</dd>

                    <dt class="col-sm-4"><i class="fas fa-registered mr-2"></i>Registration</dt>
                    <dd class="col-sm-8">@ViewBag.Registration.RegistrationName</dd>

                    <dt class="col-sm-4"><i class="fas fa-car mr-2"></i>Category</dt>
                    <dd class="col-sm-8">@ViewBag.Category.CategoryName</dd>

                    <dt class="col-sm-4"><i class="fas fa-calendar-alt mr-2"></i>Year</dt>
                    <dd class="col-sm-8">@Model.Year</dd>

                    <dt class="col-sm-4"><i class="fas fa-dollar-sign mr-2"></i>Price</dt>
                    <dd class="col-sm-8">@Model.Price (AFN)</dd>

                    <dt class="col-sm-4"><i class="fas fa-road mr-2"></i>Mileage</dt>
                    <dd class="col-sm-8">@Model.Mileage (MPG)</dd>

                    <dt class="col-sm-4"><i class="fas fa-align-left mr-2"></i>Description</dt>
                    <dd class="col-sm-8">@Model.Description</dd>
                </dl>
            </div>
        </div>

        <!-- Car image -->
        <div class="col-md-6">
            <div class="card">
                <img src="~/@Model.ImagePath" class="card-img-top car-image rounded border" alt="Car Image" />
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card user-details p-4">
                <h4 class="text-primary">Seller Details</h4>
                <hr />
                <dl class="row">
                    <dt class="col-sm-4">Name</dt>
                    <dd class="col-sm-8">@ViewBag.User.FirstName @ViewBag.User.LastName</dd>

                    <dt class="col-sm-4">Email</dt>
                    <dd class="col-sm-8">@ViewBag.User.Email</dd>

                    <dt class="col-sm-4">Phone Number</dt>
                    <dd class="col-sm-8">
                        <span id="phoneNumber"></span> <!-- Empty span element for displaying phone number -->
                        @if (User.Identity.IsAuthenticated)
                        {
                            @(ViewBag.User.PhoneNumber.Substring(0, 4) + "***" + ViewBag.User.PhoneNumber.Substring(ViewBag.User.PhoneNumber.Length - 3))

                            <button class="btn btn-link btn-sm" onclick="showPhoneNumber()">Show Number</button>
                        }
                        else
                        {
                            <a class="btn btn-link btn-sm" onclick="confirmLogin()">Show Number</a>
                        }
                    </dd>

                </dl>
            </div>
        </div>
    </div>

    <div class="action-buttons mt-4">
        <a asp-action="Index" class="btn btn-primary">Back to List</a>
    </div>
</div>

@* JavaScript to toggle phone number visibility *@
<script>
    function confirmLogin() {
        var confirmed = confirm("Login to see the phone number?");
        if (confirmed) {
            window.location.href = "/Account/Login";
        }
    }

    function showPhoneNumber() {
        var phoneNumberElement = document.getElementById("phoneNumber");
        phoneNumberElement.textContent = "@ViewBag.User.PhoneNumber";
    }
</script>

